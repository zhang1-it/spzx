# 尚品甄选（SPZX）项目介绍

## 1. 项目背景

尚品甄选（SPZX）是一个基于Spring Cloud微服务架构的现代化电商平台项目。该项目致力于构建一个功能完整、技术先进的电商生态系统，涵盖商品管理、用户管理、订单处理、支付结算、购物车等核心电商业务场景。

随着电商行业的快速发展，传统的单体架构已无法满足现代电商平台对高并发、高可用、可扩展性的要求。本项目采用微服务架构设计，实现了业务解耦、服务独立部署、技术栈灵活选择等优势，为电商平台的持续发展提供了坚实的技术基础。

## 2. 项目简介

### 2.1 项目概述
尚品甄选是一个完整的B2C电商解决方案，包含：
- **后台管理系统**：为商家和运营人员提供商品管理、订单管理、用户管理等功能
- **用户端服务**：为消费者提供商品浏览、购买、支付等服务
- **微服务架构**：采用Spring Cloud微服务体系，实现服务的独立部署和扩展

### 2.2 核心业务模块
- **商品管理（Product）**：商品信息管理、分类管理、品牌管理、库存管理
- **用户管理（User）**：用户注册登录、个人信息管理、地址管理
- **订单管理（Order）**：订单创建、订单状态管理、订单查询
- **支付管理（Pay）**：支付宝支付集成、支付状态回调处理
- **购物车（Cart）**：购物车管理、商品收藏
- **系统管理（Manager）**：后台管理系统、权限管理、数据统计

## 3. 技术栈

### 3.1 核心框架
- **Spring Boot 3.0.5**：微服务应用框架
- **Spring Cloud 2022.0.2**：微服务治理框架
- **Spring Cloud Alibaba 2022.0.0.0-RC2**：阿里巴巴微服务组件

### 3.2 微服务组件
- **Nacos**：服务注册与发现、配置管理
- **Spring Cloud Gateway**：API网关，统一入口
- **OpenFeign**：服务间调用
- **Sentinel**：流量控制、熔断降级
- **Spring Boot Admin**：微服务监控

### 3.3 数据存储
- **MySQL 8.0.29**：关系型数据库
- **Redis**：缓存中间件，会话管理
- **MyBatis 3.0.1**：ORM框架
- **PageHelper 1.4.3**：分页插件

### 3.4 开发工具与组件
- **Java 17**：开发语言
- **Maven**：项目构建工具
- **Knife4j 4.1.0**：API文档工具
- **EasyExcel 3.1.0**：Excel导入导出
- **Lombok 1.18.20**：代码生成工具
- **FastJSON 1.2.29**：JSON处理
- **Hutool**：Java工具库

### 3.5 第三方集成
- **支付宝支付 SDK 4.8.73.ALL**：支付功能集成
- **MinIO**：对象存储服务

### 3.6 运行环境
- **JDK 17**：运行环境
- **Docker**：容器化部署（可选）

## 4. 功能特性

### 4.1 后台管理系统功能
#### 4.1.1 系统管理
- **用户管理**：管理员账户管理、角色权限分配
- **菜单管理**：动态菜单配置、权限控制
- **角色管理**：角色创建、权限分配
- **登录认证**：验证码登录、Token认证

#### 4.1.2 商品管理
- **分类管理**：商品分类的增删改查、树形结构展示
- **品牌管理**：品牌信息维护、品牌与分类关联
- **商品管理**：商品基本信息、SKU管理、库存管理
- **规格管理**：商品规格定义、规格值配置
- **数据导入导出**：Excel批量导入导出商品信息

#### 4.1.3 订单管理
- **订单查询**：订单列表查看、订单详情查看
- **订单统计**：订单数据统计分析
- **订单状态管理**：订单状态流转控制

#### 4.1.4 文件管理
- **文件上传**：支持图片等文件上传到MinIO
- **文件管理**：文件存储、访问管理

### 4.2 用户端功能
#### 4.2.1 用户系统
- **用户注册**：手机号注册、验证码验证
- **用户登录**：用户名密码登录、Token认证
- **个人信息**：用户信息维护、头像上传
- **地址管理**：收货地址的增删改查

#### 4.2.2 商品系统
- **商品浏览**：商品列表、商品详情、商品搜索
- **分类浏览**：按分类查看商品
- **品牌展示**：品牌商品展示

#### 4.2.3 购物车系统
- **购物车管理**：添加商品到购物车、修改数量、删除商品
- **购物车同步**：基于Redis的购物车数据同步
- **购物车结算**：选择商品进行结算

#### 4.2.4 订单系统
- **订单创建**：从购物车创建订单、直接购买
- **订单查询**：个人订单列表、订单详情
- **订单跟踪**：订单状态实时更新

#### 4.2.5 支付系统
- **支付宝支付**：集成支付宝沙箱环境支付
- **支付回调**：支付成功后的异步通知处理
- **支付状态**：支付状态实时更新

## 5. 项目架构

### 5.1 微服务架构图
```
┌─────────────────┐    ┌─────────────────┐
│   用户端(Web)    │    │   管理端(Web)    │
└─────────────────┘    └─────────────────┘
          │                      │
          └──────────┬───────────┘
                     │
          ┌─────────────────┐
          │  Gateway网关     │
          └─────────────────┘
                     │
     ┌───────────────┼───────────────┐
     │               │               │
┌─────────┐  ┌─────────┐  ┌─────────┐
│商品服务  │  │用户服务  │  │订单服务  │
└─────────┘  └─────────┘  └─────────┘
     │               │               │
     └───────────────┼───────────────┘
                     │
          ┌─────────────────┐
          │   支付服务       │
          └─────────────────┘
```

### 5.2 服务模块划分
- **spzx-server-gateway**：API网关服务，统一入口
- **spzx-manager**：后台管理服务
- **service-product**：商品管理微服务
- **service-user**：用户管理微服务
- **service-order**：订单管理微服务
- **service-pay**：支付管理微服务
- **spzx-cart**：购物车微服务
- **spzx-sba**：Spring Boot Admin监控服务

### 5.3 公共模块
- **spzx-common**：公共组件
  - **common-service**：公共服务配置
  - **common-log**：日志组件
  - **common-utils**：工具类
- **spzx-model**：实体类和DTO
- **spzx-service-client**：Feign客户端

## 6. 项目亮点

### 6.1 架构设计亮点
#### 6.1.1 微服务架构
- **服务拆分合理**：按业务领域拆分服务，职责清晰
- **服务独立部署**：各服务可独立开发、测试、部署
- **技术栈灵活**：不同服务可采用适合的技术栈

#### 6.1.2 统一网关
- **请求路由**：基于路径的智能路由
- **统一鉴权**：在网关层实现用户认证
- **跨域处理**：统一处理跨域请求
- **负载均衡**：自动负载均衡到服务实例

#### 6.1.3 服务治理
- **服务注册发现**：基于Nacos的服务治理
- **配置管理**：统一配置管理，动态配置更新
- **服务监控**：Spring Boot Admin实现服务监控
- **流量控制**：Sentinel实现流量控制和熔断降级

### 6.2 技术实现亮点
#### 6.2.1 认证授权
- **多级认证**：网关认证 + 服务内部认证
- **Token传递**：通过Header传递用户信息
- **权限控制**：基于角色的权限管理
- **拦截器设计**：优雅的认证拦截器实现

#### 6.2.2 数据处理
- **分页查询**：PageHelper实现统一分页
- **Excel导入导出**：EasyExcel实现数据批量处理
- **缓存策略**：Redis缓存提升性能
- **数据一致性**：事务处理保证数据一致性

#### 6.2.3 第三方集成
- **支付集成**：支付宝支付完整集成
- **文件存储**：MinIO对象存储集成
- **API文档**：Knife4j自动生成API文档

### 6.3 代码质量亮点
#### 6.3.1 代码规范
- **统一异常处理**：全局异常处理机制
- **统一返回格式**：Result统一响应格式
- **日志记录**：AOP实现操作日志记录
- **参数校验**：统一参数校验机制

#### 6.3.2 可扩展性
- **模块化设计**：公共组件抽取，易于复用
- **配置化驱动**：通过配置文件控制行为
- **注解驱动**：自定义注解简化配置
- **插件化设计**：支持功能模块插拔

## 7. 项目难点

### 7.1 微服务架构难点
#### 7.1.1 服务间调用
- **难点描述**：微服务间的远程调用复杂性
- **解决方案**：
  - 使用OpenFeign简化服务调用
  - 实现Feign拦截器传递请求头信息
  - 配置Fallback机制处理服务降级

#### 7.1.2 分布式事务
- **难点描述**：跨服务的数据一致性保证
- **解决方案**：
  - 采用最终一致性原则
  - 通过补偿机制处理异常情况
  - 合理设计业务流程减少分布式事务

#### 7.1.3 数据一致性
- **难点描述**：缓存与数据库数据同步
- **解决方案**：
  - 合理设计缓存更新策略
  - 使用Redis过期机制
  - 实现缓存预热和缓存穿透防护

### 7.2 技术实现难点
#### 7.2.1 统一认证
- **难点描述**：微服务环境下的用户认证传递
- **解决方案**：
  - 网关层统一鉴权，将用户信息写入请求头
  - 服务内部通过拦截器获取用户信息
  - 使用ThreadLocal实现用户上下文管理

#### 7.2.2 支付集成
- **难点描述**：支付宝支付的签名验证和异步通知处理
- **解决方案**：
  - 正确配置支付宝公钥私钥
  - 实现支付回调的幂等性处理
  - 处理支付状态的同步更新

#### 7.2.3 购物车设计
- **难点描述**：购物车数据的存储和同步
- **解决方案**：
  - 使用Redis Hash结构存储购物车数据
  - 实现购物车与商品信息的实时同步
  - 处理用户登录前后购物车数据合并

### 7.3 性能优化难点
#### 7.3.1 接口性能
- **难点描述**：高并发场景下的接口响应性能
- **解决方案**：
  - Redis缓存热点数据
  - 数据库查询优化
  - 异步处理非核心业务

#### 7.3.2 文件上传
- **难点描述**：大文件上传的性能和可靠性
- **解决方案**：
  - 集成MinIO对象存储
  - 实现文件上传进度控制
  - 支持断点续传（扩展功能）

## 8. 部署说明

### 8.1 环境要求
- JDK 17+
- MySQL 8.0+
- Redis 5.0+
- Nacos 2.0+
- Sentinel Dashboard

### 8.2 部署步骤
1. **基础环境搭建**：安装JDK、MySQL、Redis、Nacos等
2. **数据库初始化**：创建数据库，执行SQL脚本
3. **配置文件修改**：修改各服务的配置文件
4. **服务启动**：按依赖关系启动各个微服务
5. **网关配置**：配置Gateway路由规则

### 8.3 监控部署
- **Nacos控制台**：服务注册与配置管理
- **Sentinel控制台**：流量控制监控
- **Spring Boot Admin**：服务健康状况监控

## 9. 总结

尚品甄选项目是一个技术先进、功能完整的微服务电商平台。项目采用了当前主流的Spring Cloud微服务技术栈，实现了服务的解耦和独立部署。通过合理的架构设计和技术选型，项目具备了良好的可扩展性、可维护性和高可用性。

项目的亮点在于微服务架构的合理运用、统一认证机制的设计、以及第三方服务的优雅集成。同时，项目也克服了微服务架构带来的复杂性挑战，如服务间调用、数据一致性、分布式事务等难点问题。

该项目不仅是一个完整的电商解决方案，更是学习和实践微服务架构的优秀案例，对于理解现代化电商系统的设计和实现具有重要的参考价值。

## 10.项目运行图

### 后台管理端

<img width="1920" height="902" alt="image" src="https://github.com/user-attachments/assets/dd6411a5-fbde-403d-942a-261ae253c178" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/cfe026cc-75e3-45ec-81b9-2e642c8c392e" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/4bcaac6a-6f00-4dd1-9f77-8f71b16aec2a" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/0b16faa2-17c8-4ab4-83cf-1415e87f90f1" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/5e674a29-bc3c-4f40-9c28-ce4bfca3ce67" />

<img width="1920" height="1014" alt="image" src="https://github.com/user-attachments/assets/78e444bb-0c84-4e05-adc4-bc2bd9e9db7f" />

<img width="1917" height="949" alt="image" src="https://github.com/user-attachments/assets/9cf71968-d5ff-43a4-ab77-2832c40beb05" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/db72b3bf-b913-45d6-a2dc-6c75d14ad168" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/35287ed3-735a-4470-9549-fffac5efdfdc" />

<img width="1920" height="958" alt="image" src="https://github.com/user-attachments/assets/e1417d5b-6098-491a-bdb7-211930e0f319" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/7426941f-7f28-4d0d-ad95-612e1c32448b" />

<img width="1915" height="896" alt="image" src="https://github.com/user-attachments/assets/c21ac5bd-3240-47ea-9313-ecefe8a9a31b" />

<img width="1920" height="912" alt="image" src="https://github.com/user-attachments/assets/f62c402a-78b4-4c3f-903d-3e40f7e3e2f7" />

